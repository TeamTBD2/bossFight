<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>8th Wall AR Sphere Example</title>
    <!-- Ensure the viewport covers the entire device screen -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <!-- Include the 8th Wall Web AR SDK (be sure to add your own app key) -->
    <script src="https://apps.8thwall.com/xrweb?appKey=YOUR_APP_KEY"></script>
    <!-- Include Three.js (you can use a CDN version) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r121/three.min.js"></script>
    <style>
      /* Make sure the canvas fills the whole screen */
      body, html { margin: 0; height: 100%; overflow: hidden; }
    </style>
  </head>
  <body>
    <script>
      // Configure the Three.js renderer within 8th Wall.
      // Here we enable rendering of the camera feed to a texture.
      XR8.Threejs.configure({ renderCameraTexture: true });

      // Add a camera pipeline module that runs when the AR session starts.
      // This module will get access to the 8th Wall Three.js scene and camera,
      // create a sphere, and add it to the scene.
      XR8.addCameraPipelineModule({
        name: 'add-sphere',
        onStart: () => {
          // Get the Three.js scene and camera that 8th Wall manages.
          const { scene, camera } = XR8.Threejs.xrScene();

          // Create a red sphere. The sphere’s radius is 0.1 meters.
          // To ensure it “sits” on the detected surface (Y=0), position its center at Y=0.1.
          const geometry = new THREE.SphereGeometry(0.1, 32, 32);
          const material = new THREE.MeshBasicMaterial({ color: 0xff0000 });
          const sphere = new THREE.Mesh(geometry, material);

          // Position the sphere 0.5 meters in front of the starting camera location.
          // Adjust the X and Z values as needed.
          sphere.position.set(0, 0.1, -0.5);

          // Add the sphere to the scene so that it is rendered.
          scene.add(sphere);
        }
      });

      // Start the 8th Wall AR engine.
      XR8.run();
    </script>
  </body>
</html>
